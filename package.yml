name       : sudo
version    : 1.9.13_p3
release    : 47
source     :
    - https://www.sudo.ws/dist/sudo-1.9.13p3.tar.gz : 92334a12bb93e0c056b09f53e255ccb7d6f67c6350e2813cd9593ceeca78560b
homepage   : https://www.sudo.ws/
license    : ISC
summary    : Run commands as a privileged user
component  : system.base
description: |
    The Sudo package allows a system administrator to give certain users (or groups of users) the ability to run some (or all) commands as root or another user while logging the commands and arguments.
setup      : |
    %patch -p1 < $pkgfiles/stateless.patch
    %configure --with-all-insults \
               --with-env-editor \
               --with-editor=/usr/bin/nano \
               --with-tty-tickets \
               --with-passprompt="[sudo] password for %p:" \
               --without-sendmail
build      : |
    %make
install    : |
    %make_install
    rm -rvf $installdir/{etc,var,run}
    # sysusers group it
    install -Dm00644 $pkgfiles/sudo.sysusers $installdir/%libdir%/sysusers.d/sudo.conf
    # tmpfiles
    rm -rfv $installdir/usr/lib
    install -Dm00644 $pkgfiles/sudo.tmpfiles $installdir/%libdir%/tmpfiles.d/sudo.conf
    # sudoers file

    rm -fv $installdir/usr/share/defaults/etc/sudo/sudoers
    install -Dm00400 $pkgfiles/sudoers $installdir/usr/share/defaults/etc/sudo/sudoers
    # sudo pam
    install -Dm00644 $pkgfiles/pam.d/sudo $installdir/usr/share/defaults/etc/pam.d/sudo
